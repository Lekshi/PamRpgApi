BEGIN TRANSACTION;
GO

ALTER TABLE [Personagens] ADD [UsuarioId] int NULL;
GO

CREATE TABLE [TB_Disputas] (
    [Id] int NOT NULL IDENTITY,
    [Dt_Disputa] datetime2 NULL,
    [AtacanteId] int NOT NULL,
    [OponenteId] int NOT NULL,
    [Tx_Narracao] nvarchar(max) NULL,
    CONSTRAINT [PK_TB_Disputas] PRIMARY KEY ([Id])
);
GO

UPDATE [Personagens] SET [UsuarioId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;

GO

UPDATE [Personagens] SET [UsuarioId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;

GO

UPDATE [Personagens] SET [UsuarioId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;

GO

UPDATE [Personagens] SET [UsuarioId] = NULL
WHERE [Id] = 4;
SELECT @@ROWCOUNT;

GO

UPDATE [Personagens] SET [UsuarioId] = NULL
WHERE [Id] = 5;
SELECT @@ROWCOUNT;

GO

UPDATE [Personagens] SET [UsuarioId] = NULL
WHERE [Id] = 6;
SELECT @@ROWCOUNT;

GO

UPDATE [Personagens] SET [UsuarioId] = NULL
WHERE [Id] = 7;
SELECT @@ROWCOUNT;

GO

UPDATE [Usuarios] SET [PasswordHash] = 0x6BFD5383B54D6EB3AF547DCE81B57DD01F7552360C6E484E8335143112357A3FAB91E7E5265A2057E66A757B5A1E79ABB1F8324AC84497D4DC81004D4C43DB84, [PasswordSalt] = 0xED8FC00535C4CDC7E401009FC5F4C98799EEEBBCC07873ACF0FCE33D218B6E9FB94B166EC75B0A0146882AF6999DE0E76D6A8F952532A6E6662B6DC36311FF3FA4D402E65D19949EB3EFA987A78E45126E4FD47D8420F390C351EC637D207EA58FAC12111F2567A41A958C36AAF174733DD2C5612954F5F6BB2C76A0FA05A16D
WHERE [Id] = 1;
SELECT @@ROWCOUNT;

GO

CREATE INDEX [IX_Personagens_UsuarioId] ON [Personagens] ([UsuarioId]);
GO

ALTER TABLE [Personagens] ADD CONSTRAINT [FK_Personagens_Usuarios_UsuarioId] FOREIGN KEY ([UsuarioId]) REFERENCES [Usuarios] ([Id]);
GO

INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230814102852_MigracaoUsuario', N'7.0.4');
GO

COMMIT;
GO

